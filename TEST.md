# Unit тесты для Gallery API

## Созданные тестовые файлы

### 1. tests/upload.test.js
- Тестирование загрузки нового изображения
- Тестирование возврата ошибки 400 при отсутствии изображения
- Тестирование использования имени файла по умолчанию
- Тестирование обработки ошибок базы данных при загрузке

### 2. tests/images.test.js
- Тестирование получения списка всех изображений
- Тестирование обработки ошибок базы данных при получении изображений

### 3. tests/delete.test.js
- Тестирование успешного удаления изображения
- Тестирование возврата ошибки 404 при отсутствии изображения
- Тестирование обработки ошибок базы данных при удалении

### 4. tests/views.test.js
- Тестирование увеличения счетчика просмотров
- Тестирование возврата ошибки 404 при отсутствии изображения
- Тестирование обработки ошибок базы данных при обновлении просмотров

### 5. tests/analytics.test.js
- Тестирование получения статистики аналитики (без аутентификации)
- Тестирование получения данных о количестве изображений
- Тестирование получения временной шкалы загрузок
- Тестирование обработки ошибок базы данных в аналитике

### 6. tests/errorHandling.test.js
- Тестирование возврата ошибки 404 для несуществующих маршрутов
- Тестирование обработки ошибок базы данных

## Запуск тестов

Для запуска всех тестов выполните команду:
```
npm test
```

Для запуска конкретного теста:
```
npm test -- tests/upload.test.js
```

## Особенности реализации

- Все тесты используют mock базы данных для изоляции
- Для тестирования аналитики создана отдельная тестовая версия приложения без аутентификации
- Тесты проверяют как успешные сценарии, так и обработку ошибок
- Используется библиотека Supertest для тестирования HTTP запросов
- Все тесты успешно проходят